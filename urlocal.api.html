<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>urlocal.api documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name"></span> <span class="project-version"></span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1 current"><a href="urlocal.api.html"><div class="inner"><span>urlocal.api</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="urlocal.api.html#var-input-stream"><div class="inner"><span>input-stream</span></div></a></li><li class="depth-1"><a href="urlocal.api.html#var-remove-cache-entry.21"><div class="inner"><span>remove-cache-entry!</span></div></a></li><li class="depth-1"><a href="urlocal.api.html#var-reset-cache.21"><div class="inner"><span>reset-cache!</span></div></a></li><li class="depth-1"><a href="urlocal.api.html#var-set-cache-check-interval-secs.21"><div class="inner"><span>set-cache-check-interval-secs!</span></div></a></li><li class="depth-1"><a href="urlocal.api.html#var-set-cache-name.21"><div class="inner"><span>set-cache-name!</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">urlocal.api</h1><div class="doc"><pre class="plaintext">The public API of the urlocal library.
</pre></div><div class="public anchor" id="var-input-stream"><h3>input-stream</h3><div class="usage"><code>(input-stream url)</code><code>(input-stream url {:keys [connect-timeout read-timeout follow-redirects? request-headers return-cached-content-on-exception?], :or {connect-timeout 1000, read-timeout 1000, follow-redirects? false, request-headers {"User-Agent" "com.github.pmonks/urlocal"}, return-cached-content-on-exception? true}, :as opts})</code></div><div class="doc"><pre class="plaintext">Returns an InputStream for the content retrieved from url (a String,
java.net.URL or java.net.URI) and caching it, or nil if url is nil or
unsupported (i.e. is not an http(s) URL).

The options map provides these tunables, all of them optional:
* `:connect-timeout` (int, default=1000): the number of milliseconds to wait
  when establishing the socket connection before timing out
* `:read-timeout` (int, default=1000): the number of milliseconds to wait when
  reading content over the socket before timing out
* `:follows-redirects?` (boolean, default=false): whether to follow a single
  redirect (HTTP status codes 301, 302) if the server issues one (more than
  one redirect will throw an exception)
* `:request-headers` (map with string keys and values): a map of request
  headers to send along with the request
* `return-cached-content-on-exception?` (boolean, default=true): whether
  (potentially stale) cached content should be returned if it's available, and
  an exception occurs while checking for staleness

Throws on IO errors.</pre></div><div class="src-link"><a href="https://github.com/pmonks/urlocal/blob/release/src/urlocal/api.clj#L27">view source</a></div></div><div class="public anchor" id="var-remove-cache-entry.21"><h3>remove-cache-entry!</h3><div class="usage"><code>(remove-cache-entry! url)</code></div><div class="doc"><pre class="plaintext">Removes the cache entry for a single URL, if it exists. Returns nil.

Throws on IO errors.</pre></div><div class="src-link"><a href="https://github.com/pmonks/urlocal/blob/release/src/urlocal/api.clj#L89">view source</a></div></div><div class="public anchor" id="var-reset-cache.21"><h3>reset-cache!</h3><div class="usage"><code>(reset-cache!)</code></div><div class="doc"><pre class="plaintext">Resets (i.e. deletes) the local cache, returning nil.

Throws on IO errors.</pre></div><div class="src-link"><a href="https://github.com/pmonks/urlocal/blob/release/src/urlocal/api.clj#L79">view source</a></div></div><div class="public anchor" id="var-set-cache-check-interval-secs.21"><h3>set-cache-check-interval-secs!</h3><div class="usage"><code>(set-cache-check-interval-secs! cache-check-interval-secs)</code></div><div class="doc"><pre class="plaintext">Sets the cache check interval, in seconds.  Default is 86,400 (24 hours).
</pre></div><div class="src-link"><a href="https://github.com/pmonks/urlocal/blob/release/src/urlocal/api.clj#L96">view source</a></div></div><div class="public anchor" id="var-set-cache-name.21"><h3>set-cache-name!</h3><div class="usage"><code>(set-cache-name! name)</code></div><div class="doc"><pre class="plaintext">Sets the name of the cache (which ends up being part of the cache directory's
name), and returns nil.  Default is 'urlocal'.

Notes:
* name must not be blank.
* the new cache may not be empty if it was previously populated.
* setting a new name after a previously named cache has already been populated
  will 'orphan' the prior cache. To avoid this, you should call `reset-cache!`
  prior to setting a new name.

Throws on IO errors.</pre></div><div class="src-link"><a href="https://github.com/pmonks/urlocal/blob/release/src/urlocal/api.clj#L60">view source</a></div></div></div></body></html>