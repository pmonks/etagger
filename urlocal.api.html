<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>urlocal.api documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name"></span> <span class="project-version"></span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1 current"><a href="urlocal.api.html"><div class="inner"><span>urlocal.api</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="urlocal.api.html#var-cache-check-interval-secs"><div class="inner"><span>cache-check-interval-secs</span></div></a></li><li class="depth-1"><a href="urlocal.api.html#var-cache-dir"><div class="inner"><span>cache-dir</span></div></a></li><li class="depth-1"><a href="urlocal.api.html#var-cache-name"><div class="inner"><span>cache-name</span></div></a></li><li class="depth-1"><a href="urlocal.api.html#var-input-stream"><div class="inner"><span>input-stream</span></div></a></li><li class="depth-1"><a href="urlocal.api.html#var-remove-cache-entry.21"><div class="inner"><span>remove-cache-entry!</span></div></a></li><li class="depth-1"><a href="urlocal.api.html#var-reset-cache.21"><div class="inner"><span>reset-cache!</span></div></a></li><li class="depth-1"><a href="urlocal.api.html#var-set-cache-check-interval-secs.21"><div class="inner"><span>set-cache-check-interval-secs!</span></div></a></li><li class="depth-1"><a href="urlocal.api.html#var-set-cache-name.21"><div class="inner"><span>set-cache-name!</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">urlocal.api</h1><div class="doc"><div class="markdown"><p>The public API of the urlocal library.</p>
</div></div><div class="public anchor" id="var-cache-check-interval-secs"><h3>cache-check-interval-secs</h3><div class="usage"><code>(cache-check-interval-secs)</code></div><div class="doc"><div class="markdown"><p>Returns the current cache check interval, in seconds.</p>
</div></div><div class="src-link"><a href="https://github.com/pmonks/urlocal/blob/release/src/urlocal/api.clj#L119">view source</a></div></div><div class="public anchor" id="var-cache-dir"><h3>cache-dir</h3><div class="usage"><code>(cache-dir)</code></div><div class="doc"><div class="markdown"><p>Returns the current cache directory as a <code>java.io.File</code>.</p>
</div></div><div class="src-link"><a href="https://github.com/pmonks/urlocal/blob/release/src/urlocal/api.clj#L69">view source</a></div></div><div class="public anchor" id="var-cache-name"><h3>cache-name</h3><div class="usage"><code>(cache-name)</code></div><div class="doc"><div class="markdown"><p>Returns the current name of the cache as a <code>String</code>.</p>
</div></div><div class="src-link"><a href="https://github.com/pmonks/urlocal/blob/release/src/urlocal/api.clj#L74">view source</a></div></div><div class="public anchor" id="var-input-stream"><h3>input-stream</h3><div class="usage"><code>(input-stream url)</code><code>(input-stream url {:keys [connect-timeout read-timeout follow-redirects? retry-when-throttled? max-retry-after request-headers return-cached-content-on-exception?], :or {connect-timeout 1000, read-timeout 1000, follow-redirects? false, retry-when-throttled? false, max-retry-after 10, request-headers {"User-Agent" "com.github.pmonks/urlocal"}, return-cached-content-on-exception? true}, :as opts})</code></div><div class="doc"><div class="markdown"><p>Retrieves the content from <code>url</code> and caches it, returning an <code>InputStream</code> for the content.  <code>url</code> may be a <code>String</code>, <code>java.net.URL</code> or <code>java.net.URI</code>. Returns <code>nil</code> if <code>url</code> is <code>nil</code> or unsupported (i.e. is not an http(s) URL).</p>
<p><code>opts</code> provides these tunables, all of them optional:</p>
<ul>
<li><code>:connect-timeout</code> (<code>int</code>, default <code>1000</code>): the maximum number of milliseconds to wait when establishing the socket connection</li>
<li><code>:read-timeout</code> (<code>int</code>, default <code>1000</code>): the maximum number of milliseconds to wait when reading content from the socket connection</li>
<li><code>:follow-redirects?</code> (<code>boolean</code>, default <code>false</code>): whether to follow a single redirect (HTTP status codes 301, 302) if the server issues one (more than one redirect will throw an exception)</li>
<li><code>:retry-when-throttled?</code> (<code>boolean</code>, default <code>false</code>): whether to automatically handle throttled HTTP requests (HTTP status code 429), by sleeping as requested by the <code>Retry-After</code> HTTP response header, then retrying the request</li>
<li><code>:max-retry-after</code> (<code>int</code>, default <code>10</code>): the maximum number of seconds to sleep when waiting to retry a throttled request</li>
<li><code>:request-headers</code> (a <code>Map</code> with <code>String</code> keys and values): a map of request headers to send along with the request</li>
<li><code>return-cached-content-on-exception?</code> (<code>boolean</code>, default <code>true</code>): whether (potentially stale) cached content should be returned if it’s available, and an exception occurs while checking for staleness</li>
</ul>
<p>Throws on IO errors.</p>
</div></div><div class="src-link"><a href="https://github.com/pmonks/urlocal/blob/release/src/urlocal/api.clj#L27">view source</a></div></div><div class="public anchor" id="var-remove-cache-entry.21"><h3>remove-cache-entry!</h3><div class="usage"><code>(remove-cache-entry! url)</code></div><div class="doc"><div class="markdown"><p>Removes the cache entry for the given <code>url</code>, if it exists. Returns <code>nil</code>.</p>
<p>Throws on IO errors.</p>
</div></div><div class="src-link"><a href="https://github.com/pmonks/urlocal/blob/release/src/urlocal/api.clj#L111">view source</a></div></div><div class="public anchor" id="var-reset-cache.21"><h3>reset-cache!</h3><div class="usage"><code>(reset-cache!)</code></div><div class="doc"><div class="markdown"><p>Resets (i.e. deletes) the local cache, returning <code>nil</code>.</p>
<p>Throws on IO errors.</p>
</div></div><div class="src-link"><a href="https://github.com/pmonks/urlocal/blob/release/src/urlocal/api.clj#L100">view source</a></div></div><div class="public anchor" id="var-set-cache-check-interval-secs.21"><h3>set-cache-check-interval-secs!</h3><div class="usage"><code>(set-cache-check-interval-secs! cache-check-interval-secs)</code></div><div class="doc"><div class="markdown"><p>Sets the cache check interval, in seconds.  Default is <code>86400</code> (24 hours). Returns <code>nil</code>.</p>
</div></div><div class="src-link"><a href="https://github.com/pmonks/urlocal/blob/release/src/urlocal/api.clj#L124">view source</a></div></div><div class="public anchor" id="var-set-cache-name.21"><h3>set-cache-name!</h3><div class="usage"><code>(set-cache-name! n)</code></div><div class="doc"><div class="markdown"><p>Sets the name of the cache to <code>n</code> (which ends up being part of the cache directory’s name), and returns <code>nil</code>.  Default name is <code>urlocal</code>.</p>
<p>Notes:</p>
<ul>
<li><code>n</code> must not be blank.</li>
<li>the new cache directory may not be empty if it exists and was previously populated.</li>
<li>setting a new name after a previously named cache has already been populated will ‘orphan’ the prior cache. To avoid this, you should call <code>reset-cache!</code> prior to setting a new name.</li>
</ul>
<p>Throws on IO errors.</p>
</div></div><div class="src-link"><a href="https://github.com/pmonks/urlocal/blob/release/src/urlocal/api.clj#L79">view source</a></div></div></div></body></html>